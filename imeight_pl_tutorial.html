<!DOCTYPE html>
<html lang="en">
<head>
	<title>TUTOR</title>
	<style>
		body {
			background: silver;
			overflow-x: hidden;
			overflow-y: scroll;
		}
		
		body .code {
			font-family: monospace;
			font-size: 13px;
			font-weight: bold;
		    white-space: pre;
			padding-bottom: 13px;
			margin-left: 2em;
			tab-size: 2em;
			width: 540px;
			overflow-x: hidden
		}
		
		body .code i {
			font-weight: normal;
		}
		
		h1, h2, h3 {
			font-family: Westminster, "Data 70";
			letter-spacing: 1px;
			font-size: 23px;
		}
		
		body h2 {
			color: silver;
			background: black;
			padding-left: 8px;
			margin-left: -6px;
		}
		
		body h1 {
			font-size: 32px;
			border-bottom: 8px solid white;
		}
		
		body hr {
			margin: 6px 2em 6px 0;
			padding: 0;
			height: 0;
			border-width: 0 0 1px 0;
			border-style: solid;
			border-color: white;
		}
		
		body {
			font-family: Fxmatrix;
			font-size: 12px;
		}
		
		body a:link {
			color: black;
		}
		
		body a:visited {
			color: white;
		}
		
		.toccontainer {
			margin: 20px 0 0 0;
		}
		
		.toccontainer h3 {
			float: left; 
			margin: 0 20px 0 0;
		}

		body div.contents {
		}
		
		@font-face {
		    font-family: Westminster;
		    src: url(Westminster.ttf.woff);
		}
		
		@font-face {
		    font-family: Fxmatrix;
		    src: url(FXMatrix105PropPicaItalic.woff);
		}
	</style>
</head>
<body>
<h1>Programming Tutorials</h1>
<p>This is the imeight programming language. One that resembles those 80s
languages when programming was still fun to learn. Do you want to experience, too?</p>
<p>This emulated imaginary machine has these screen modes:</p><ul>
<li>Program Listing: for writing and editing your program text.</li>
<li>Command Line: for issuing interactive commands and reading output of your program as it runs.</li>
<li>Graphic Screen and Designer: see <a href="#game">Game Programming Tutorial.</a></li>
</ul>
<p>You can use the usual Copy and Paste function in your browser to transfer
example codes from the tutorial to the Program Listing panel.</p>
<p>For a test run, press > RUNNER (F9) then see RUN command appear in the 
Command Line, press Enter.</p>
<p>Return to the Program Listing by entering the LIST command.</p>
<p>NEW command will also erase the program text.</p>

<h2><a name="contents">Contents</a></h2>
<div class="toccontainer">
<h3>Programming Instruction by Instruction</h3><div class="contents">
	<a href="#72">PRINT</a>
&bull;	<a href="#89">INPUT</a>
&bull;	<a href="#126">Names</a>
&bull;	<a href="#143">LET</a>
&bull;	<a href="#175">REM, The Colon, Spaces: Your Readable Code</a>
&bull;	<a href="#201">Expressions</a>
&bull;	<a href="#299">GOTO</a>
&bull;	<a href="#331">IF and THEN</a>
&bull;	<a href="#383">Operator Summary</a>
&bull;	<a href="#438">GOSUB and RETURN</a>
&bull;	<a href="#448">END and STOP</a>
&bull;	<a href="#460">Command Summary</a>
&bull;	<a href="#465">FOR and NEXT</a></div>
</div>
<div class="toccontainer">
<h3>Details of the Language</h3><div class="contents">
<a href="#496">DATA and READ</a>
&bull;	<a href="#513">RESTORE</a>
&bull;	<a href="#540">DIM</a>
&bull;	<a href="#561">POKE</a>
&bull;	<a href="#567">CLR</a>
&bull;	<a href="#579">DEF</a>
&bull;	<a href="#593">ON</a>
&bull;	<a href="#613">Multidimensional Arrays</a>
&bull;	<a href="#618">Non-Unary Functions</a>
&bull;	<a href="#642">Abbreviations</a>
&bull;  <a href="#653">PUSH and PULL</a>
&bull;	<a href="#663">Run Time Errors</a>
&bull;	<a href="#738">Contrasting C64</a></div>
</div>
<div class="toccontainer">
<h3>Game Programming Tutorial</h3><div class="contents">
	<a href="#2001">WAIT and GET</a>
&bull;	<a href="#2002">TIME and TIME$</a>
&bull;	<a href="#2003">Sprites!</a>
&bull;	<a href="#2004">Colors!</a>
&bull;	<a href="#2005">Pixel Data Animations</a>
&bull;	<a href="#2006">Tiles</a></div>
</div>
<div class="toccontainer">
<h3>Reference Sheet Index</h3><div class="contents">
		<a href="#126">Names</a>
&bull;	<a href="#201">Expressions</a>
&bull;	<a href="#383">Operator Summary</a>
&bull;	<a href="#460">Command Summary</a>
&bull;	<a href="#642">Abbreviations</a>
&bull;	<a href="#663">Run Time Errors</a>
&bull;	<a href="#2004">Color Codes</a></div>
</div>
<div class="toccontainer">
<h3>Fun Projects</h3><div class="contents">
		<a href="#fp1" title="PRINT * ASCII art">1</a>
&bull; 	<a href="#fp2" title="Expressions * Zebra say">2</a>
&bull; 	<a href="#fp3" title="IF and THEN * Text Adventure">3</a>
&bull; 	<a href="#fp4" title="Sprites * Racer">4</a></div>
</div>






















<h1>Programming Instruction by Instruction</h1>

<h2><a name="72">PRINT</a></h2>
<div class="code">PRINT "HELLO WORLD"
REM<i>ARK: The PRINT instruction is for learning and debugging purposes only.</i>
REM<i>ARK: See "HELLO WORLD" printed as a result.</i></div>

<h3>An Infix Operator: + Between Numbers</h3>
<div class="code">PRINT 6+4
REM<i>ARK: See 10 printed on the Command Line.</i>
REM<i>ARK: + is an infix operator and works like in maths.</i>
REM<i>ARK: There are more operators to be covered later.</i></div>

<h3>A Function: SIN</h3>
<div class="code">PRINT SIN(1.571)
REM<i>ARK: 1.571 is approximately 90 degrees in radians. </i>
REM<i>ARK: So this will print a number close to 1, sine of 90 degrees.</i>
REM<i>ARK: You must not leave white space between SIN and the parenthesis.</i></div>

<h2><a name="89">INPUT</a></h2>

<h3>Full Syntax</h3>
<div class="code">INPUT "HOW MUCH?", A
REM<i>ARK: Again an instruction for learning purposes only. </i>
REM<i>ARK: Displays the question "HOW MUCH?". User may enter the value.</i></div>

<h3>Default Prompt</h3>
<div class="code">INPUT A
REM<i>ARK: A shorter version of the INPUT instruction. </i>
REM<i><i>ARK: Also asks the user but the question is generated by the runner.</i></i></div>

<h3><a name="normal-flow">The Normal Program Flow</a></h3>
<div class="code">INPUT A
PRINT A
INPUT B
PRINT B</div>  
   <p>Now we wrote a program of multiple lines. </p>
   <p>The topmost line will run first. Program waits for input.</p>
   <p>Then the 2nd line runs so the value of the variable A is printed.</p>
   <p>See that whatever is entered is printed.
   It's because INPUT instruction has assigned the entered value
   to the variable A, which kept that value when printed.</p>
   <p>Third and fourth line does the same with another variable, B. 
   INPUT B happens after printing A, as if you would read a story.</p>

<h3>Assignment: Old Value, New Value</h3>
<div class="code">INPUT A
PRINT A
INPUT A
PRINT A</div>
<p> In the previous example A kept its value. Now here is an example how it can drop the value. </p><p>Read the story.</p><p>
 1st line prompts the user and assigns the entered value to A. Variable A will keep it for the next line.
 To prove it, we do a PRINT A in the 2nd line.</p><p>
 In the 3rd line INPUT will assign again. Which means, the old value is replaced by the new.
 See what gets printed in the 4th line: the new value of A, regardless of its previous value.</p>

<h2><a name="fp1">Fun Project: PRINT</a></h2>
<p>Write a program with a lot of PRINT instructions to make beautiful ASCII art.
Wanna see my submission?</p>
<div class="code">PRINT "              ,                                          , "
PRINT "             /,!\                                       /TZ)"
PRINT "             ` V/\__   _                         _   __/\/"
PRINT "              _(LL||TTT )                       ( TTT||JJ)_"
PRINT "              \,      \)                         (/      _/"
PRINT "      __               \_                      __/              _"
PRINT "     / /_ _____________(_)___ ____   _______  / /______________( \"
PRINT "    / / // / , , ) _  ) / _  7 _  ) (_  / , \/ _  ) ,_/ _  / __/ /"
PRINT "   / / (/ / / / / (/ / / // / (/ / / __/  __/ (/ / / / (/ /_  /_/"
PRINT " _/ /\__,(_/_/_/ ___/_(_//_(\_  / /___/\___/\___/_/  \__,_\__(_)"
PRINT "(__/          (_/         (____/"</div>
<p>The key take-away from this project task was that the lines appear on the 
Command Line the same order as in the Program Listing, which we call the normal
program flow. Another take-away is that the writer of this paper has substandard
drawing skills.</p>
<p>I have <a href="https://im8.boards.net/post/2/thread" target="_blank">a 
forum topic</a> for you in case you want to tell the world how you 
accomplished this task. Time to contact fellow imeight programmers!</p>
<h2><a name="126">Names</a></h2>
<p>
In the INPUT examples we could see that there are variables named A and B, which help us store numbers.
But you can name them relatively freely. Let's see the exact rules for naming variables:
</p><ol>
<li> A variable name must start with a letter A through Z. It may have a longer name.
<div class="code">INPUT NUM</div></li>
<li> From the second position on, the name may contain digits 0 to 9 or more letters, or both, in any order.
<div class="code">INPUT NUMBER2STORE
INPUT INCOME2020</div></li>
<li> There is no length limit for the name.
<div class="code">INPUT THEREISNODEFINEDLENGTHLIMITFORTHEVARIABLENAMES</div></li>
<li> The name optionally ends in one $ or one % sign.
Convention is that the name ends in $ if it is supposed to have a text value rather than number.
The % sign suggests integer number value.
<div class="code">INPUT N%:INPUT TEXT$</div></li>
</ol>
<p>These rules not only apply to variable names, but also function names and array names, which are covered later.</p>

<h2><a name="143">LET</a></h2>
<div class="code">LET SUM = 6+4
PRINT SUM</div>
  <p>The first line will assign a calculated value, 10, to the variable SUM.</p>
  <p>Second line shows that the variable keeps the value.</p>
  <p>This way you can give a name to your calculation results, making your intent clear and the code maintainable.</p>

<h3>Implicit LET Instruction</h3>
<div class="code">SUM = 6+4
PRINT SUM</div>
<p>You can omit the instruction LET and it will still be interpreted as an assignment.</p>
<p><em>Note:</em> Line 1 is not an equation. The left side must specify the thing to assign to (variable A this time.)
It is an error to swap the two sides of the assignment, putting numbers or operators to the left side.</p>

<h3>Motivation</h3>
<div class="code">SUM = 1+1+1+1+1+1+1+1+1+1
LITTLEBIGGER = SUM+1
MUCHBIGGER = SUM+10
PRINT SUM
PRINT LITTLEBIGGER
PRINT MUCHBIGGER</div>
<p>Let's pretend that calculating SUM takes a lot of time and effort.
This is how you reuse a calculation. The SUM variable keeps its value and is used for calculating two more values.
So variables are not only there for code readability, they can make your code more efficient, too.</p>

<h3>Referencing The Old Value In LET</h3>
<div class="code">INPUT A
A = A+1
PRINT A</div>
<p>2nd line says, add 1 to the old value of A, and let the incremented value be the new value of A.
So the 3rd line will print the successor of whatever the user enters.</p>

<h2><a name="175">REM, The Colon, Spaces: Your Readable Code</a></h2>
<p>You can make your code self documented by inserting REM instrucions. They make the runner ignore the rest of the line.</p>
<div class="code">REM<i> * USER WILL ENTER A NUMBER *</i>
INPUT A
REM<i> * COMPUTER WILL INCREMENT THE NUMBER *</i>
A = A+1
REM<i> * AND NOW DISPLAY THE RESULT *</i>
PRINT A</div>
<p>You can use this instruction to temporarily skip a line or two while developing your program:</p>
<div class="code">PRINT "HELLO"
REM<i> PRINT "GOODBYE"</i>
REM<i> * I HAVE COMMENTED OUT THE SECOND LINE *</i>
REM<i> *    RUNS LIKE IT WAS DELETED BUT      *</i>
REM<i> * MAYBE I WILL WANT TO UNCOMMENT LATER *</i></div>
<p>You can normally put several instructions on a line, separated by colon:</p>
<div class="code">PRINT "HELLO":PRINT "WORLD":REM<i> BOTH WILL PRINT</i></div>
<p>But the colon does not break the REM instruction:</p>
<div class="code">PRINT "THIS PRINTS":REM<i> HERE IS A REMARK:PRINT "PART OF REM, NOT PRINTING"</i></div>
<p>The REMARK lines in the examples before are also REM instructions.
The space after the REM or any instruction is optional, so the text starting with ARK had been ignored by the runner.
But you should keep your code readable, which means spaces are good for you.</p>

<h2><a name="201">Expressions</a></h2>
<div class="code">A$ = "THIS TEXT BETWEEN QUOTES IS A LITERAL, A SIMPLE EXPRESSION."
A = 30:REM<i> THE NUMBER IS ALSO A LITERAL, WHICH IS AN EXPRESSION</i>
SUM = A+1:REM<i> A CALCULATION WITH AN OPERATOR IS AN EXPRESSION</i>
PRINT A+1:REM<i> EXPRESSION MAY APPEAR ON = RIGHT SIDE OR PRINT ARGUMENT</i>
PRINT A$:REM<i> VARIABLE NAME IS EXPRESSION IF ON = RIGHT SIDE OR IS PRINT ARG</i>
INPUT A$, C$:REM<i> OR ARGUMENT TO INSTRUCTIONS OTHER THAN PRINT</i>
Y = SIN(1 + 0.571):REM<i> FUNCTIONS WITH OPERATORS BUILD EXPRESSIONS, TOO</i>
Z = SIN(4.712)+2:REM<i> COMBINE THEM FREELY LIKE IN MATHS</i></div>

<h3>String Expressions</h3>
<p>(A) The String Literal</p>
<div class="code">A$ = "HELLO WORLD"
PRINT "HELLO WORLD"
PRINT A$
REM<i> *     THE QUOTED "HELLO WORLD" IS CALLED LITERAL     *</i>
REM<i> * BECAUSE IT ASSIGNS, PRINTS "HELLO WORLD" LITERALLY *</i>
REM<i> *        WHEREAS A$ IS NOT A LITERAL BECAUSE         *</i>
REM<i> * IT PRINTS "HELLO WORLD" RATHER THAN "A$" LITERALLY *</i></div>
<p>(B) Concatenation</p>
<div class="code">PRINT "HELLO" + "WORLD"
REM<i> * PLUS BETWEEN STRING LITERALS MEANS CONCATENATION *</i>
REM<i> *   PRINTS "WORLD" IMMEDIATELY FOLLOWING "HELLO"   *</i>

GREETING$ = "HELLO"
AUDIENCE$ = "WORLD"
PRINT GREETING$ + " " + AUDIENCE$
REM<i> * CONCATENATION OF STRING VARIABLES AND LITERALS ALSO WORKS *</i></div>
<p>(C) String Functions</p>
<div class="code">PRINT LEN("HOW LONG AM I"):REM<i> PRINTS 13 (10 LETTERS + 3 SPACES)</i>
PRINT "1" + "2":REM<i> DOES NOT PRINT 3 BUT A CONCATENATED STRING "12"</i>
PRINT VAL("1") + VAL("2"):REM<i> PRINTS 3</i>
PRINT ASC("A"):REM<i> PRINTS THE ASCII CODE 65</i>
PRINT CHR$(65):REM<i> PRINTS "A" BEACUSE ITS ASCII CODE IS 65</i>
PRINT LEFT$("HELLO", 3):REM<i> PRINTS "HEL" - 3 CHARACTERS FROM THE LEFT</i>
PRINT RIGHT$("HELLO", 3):REM<i> PRINTS "LLO" - 3 CHARACTERS FROM THE RIGHT</i>
PRINT MID$("HELLO", 2, 3):REM<i> PRINTS "ELL" - 3 CHARACTERS FROM THE 2ND POS</i>
REM<i> *  THE COMMA IS AN OPERATOR HERE THAT MAKES A PARAMETER LIST  * </i>
REM<i> * IT'S ON THE LOWEST PRECEDENCE LEVEL AMONG ALL THE OPERATORS *</i></div>

<h3>Numeric Expressions</h3>

<p>Examples below are for your reference, not error free programs to run.</p>

<p><a name="numlit">(A) Literals</a></p>
<div class="code">MOL = 6.022E+23:REM<i> E MEANS "TIMES 10 TO THE POWER"</i>
A = 10:REM<i> DECIMAL 10, REALLY TEN</i>
B = %10:REM<i> BINARY 10, MEANING TWO</i>
C = $10:REM<i> HEXADECIMAL 10, MEANING SIXTEEN</i>
D = !10:REM<i> FOUR-BASE 10, MEANING FOUR</i>
E = 1.2:REM<i> 1 AND 2 TENTHS</i>
F = .2:REM<i> 2 TENTHS</i>
G = .2E-2:REM<i> 0.002</i></div>
<p><a name="numop">(B) Operators</a></p>
<div class="code">C = A+B:REM<i> ADD</i>
C = A-B:REM<i> SUBTRACT</i>
C = A*B:REM<i> MULTIPLY</i>
C = A/B:REM<i> DIVIDE</i>
C = A MOD B:REM<i> REMAINDER OF AN INTEGER DIVISION</i>
C = A^B:REM<i> POWER</i>
C = A AND B:REM<i> BITWISE LOGICAL AND; SPACE IS NECESSARY AFTER A</i>
C = A XOR B:REM<i> BITWISE LOGICAL EXCLUSIVE OR; SPACE IS NECESSARY AFTER A</i>
C = A OR B:REM<i> BITWISE LOGICAL OR; SPACE IS NECESSARY AFTER A</i></div>
<p>(C) Functions</p>
<div class="code">REM<i> * SOME INTERESTING THINGS THAT TECHNICALLY ARE FUNCTIONS *</i>
Y = -X:REM<i> UNARY MINUS, MEANING (-1)*X</i>
Y = A*(B+C):REM<i> THE () IS A FUNCTION WITHOUT A NAME: RETURNS WHAT IS INSIDE</i>

REM<i> * BASIC MATHS *</i>
Y = SGN(X):REM<i> -1 FOR A NEGATIVE X, 0 FOR 0, 1 FOR A POSITIVE X</i>
Y = INT(X):REM<i> INTEGER PART OF X, BUT STAYS FLOATING POINT</i>
Y = FRAC(X):REM<i> FRACTIONAL PART OF X</i>
Y = ABS(X):REM<i> ABSOLUTE VALUE: -X IF X&lt;0, OTHERWISE X</i>
Y = SQR(X):REM<i> SQUARE ROOT</i>

REM<i> * TRANSCENDENT *</i>
Y = LOG(X):REM<i> NATURAL LOGARITHM</i>
Y = EXP(X):REM<i> NATURAL EXPONENTIAL FUNCTION</i>

REM<i> * TRIGONOMETRY *</i>
Y = COS(X):REM<i> COSINE</i>
Y = SIN(X):REM<i> SINE</i>
Y = TAN(X):REM<i> TANGENT</i>
Y = ATN(X):REM<i> ARC TANGENT	</i>

REM<i> * COMPUTING *</i>
Y = NOT(X):REM<i> BITWISE LOGICAL NEGATION</i>
Y = RND(X):REM<i> NON-NEGATIVE RANDOM NUMBER THAT IS LESS THAN X</i>
Y = PEEK(X):REM<i> THE BYTE STORED AT ADDRESS X; SPOILER: USE POKE INSTRUCTION</i>
Y$ = STR$(X):REM<i> A DECIMAL REPRESENTATION OF THE NUMBER X</i></div>

<h3>About Evaluation</h3>
<div class="code">PRINT RND(8)-RND(8):REM<i> RND EVALUATED TWICE, CAN RETURN DIFFERENT VALUES</i>
<hr/>X = RND(8):REM<i> EVALUATED ONCE</i>
PRINT X - X:REM<i> ALWAYS RETURNS ZERO</i></div>

<h2><a name="fp2">Fun Project</a></h2>
<p>Make an ASCII art zebra say something that the user enters.</p>
<div class="code">INPUT "WHAT DOES THE ZEBRA SAY?", MSG$
PRINT "                  ,,     ____________"
PRINT "                 /oo)___/" + LEFT$(MSG$ + "            ", 12) + "\"
PRINT "          _   __/=/     \____________/"
PRINT "         ( TTT||JJ) "
PRINT "           ||   ||  "</div>
<p>What expressions can you find in my code?</p><ul>
<li>String literals? Find all 8.</li>
<li>Is there a number literal, too?</li>
<li>Can you find a function?</li>
<li>Maybe infix operators?</li>
<li>Are the plus signs conactenations or number additions here?</li>
</ul>
<p>Do you have a better version?</p>

<h2><a name="299">GOTO</a></h2>

<p>Flow instructions can break the <a href="#normal-flow">normal flow</a> of the program. GOTO instructs the runner to immediately go to a specified
point in the program, rather than continuing at the next one in reading order. Using the @ instruction you can put a
label to a point in the program and reference that label in a GOTO argument.</p>

<p>Jumping over a part of the program:</p>
<div class="code">PRINT "TITLE"
PRINT "INTRODUCTION"
GOTO RESULTS
REM<i> NOONE CARES ABOUT CALCULATIONS</i>
PRINT "CALCULATIONS"
@RESULTS
PRINT "RESULTS"</div>
<p>Jumping back makes an endless loop:</p>
<div class="code">@LOOP
INPUT A
GOTO LOOP
REM<i> * THIS WILL RUN UNTIL USER CANCELS *</i></div>
<p>Jumping wildly:</p>
<div class="code">PRINT "THEY SAY GOTO IS A CRIME"
GOTO INTERMEZZO
@CONTINUATION
PRINT "CAN WE CONCLUDE, GOTO IS FUN?"
GOTO FIN
@INTERMEZZO
PRINT "I SAY GOTO IS FINE"
GOTO CONTINUATION
@FIN</div>
<p>Note: there is a built-in label called START, which points to the beginning
of the program. Therefore:</p><ul>
<li>To restart the program, say GOTO START.</li>
<li>The name START is reserved.</li>
</ul>

<h2><a name="331">IF and THEN</a></h2>

<h3>Logical Operators</h3>
<div class="code">INPUT A
REM<i> * EQUAL AND UNEQUAL SIGNS ARE OPERATORS, TOO: *</i>
REM<i> * THEY APPEAR BETWEEN TWO NUMERIC EXPRESSIONS *</i>
REM<i> *  AND GIVE 1 AS RESULT IF TRUE, 0 IF FALSE   *</i>
IF A=1 THEN PRINT "A IS ONE"
IF A&lt;>2 THEN PRINT "A IS NOT TWO"
IF A&lt;10 THEN PRINT "A IS LESS THAN TEN"
IF A>5 THEN PRINT "A IS GREATER THAN FIVE"
IF A&lt;=8 THEN PRINT "A IS NOT GREATER THAN EIGHT"
IF A>=7 THEN PRINT "A IS NOT LESS THAN SEVEN"
REM<i> * AND IS AN OPERATOR, JUST LIKE OR *</i>
IF A>=4 AND A&lt;=6 THEN PRINT "A IS BETWEEN FOUR AND SIX"
IF A&lt;3 OR A>9 THEN PRINT "A IS NOT BETWEEN THREE AND NINE"</div>

<h3>Mixing Logic and Numbers</h3><ul>
<li>True converts to 1, false to 0 if comparison result is used in numeric expression</li>
<li>When numeric expression is used as a condition, 0 means false, non-0 numbers true</li>
</ul>
<div class="code">INPUT "PLEASE ENTER 1 HERE.", A
IF 1-A THEN PRINT "BAD"
IF 1-A&lt;>0 THEN PRINT "BAD"
IF 1&lt;>A THEN PRINT "BAD"
REM<i> * IF USER DOES NOT ENTER 1 THEN "BAD" APPEARS THREE TIMES *</i>
REM<i> * IF USER ENTERS 1 THEN PROGRAM ENDS WITHOUT PRINTING     *</i></div>

<h3>Pitfalls</h3>
<p>Operators AND, OR work bitwise.                                                               </p>
<p>As long as the two sides of them are either 0 or 1, they can be used to combine conditions.   </p>
<p>Comparison operators like &lt; and > and = will give either 0 or 1 to support such combinations. </p>
<p>However, NOT function is bitwise and may have astonishing result.                             </p>
<div class="code">INPUT A:INPUT B
IF NOT(A=B) THEN PRINT "A IS NOT B?"
REM<i> * ENTER EQUAL NUMBERS                                         *</i>
REM<i> * A=B GIVES 1 (TRUE). NOT(A=B) GIVES ALL BITS BUT ONE SET, -2 *</i>
REM<i> * IT IS NOT 0, CONDITION IS MET, MESSAGE WILL BE PRINTED      *</i>
<hr/>PRINT 0=0=0:REM<i> 0 (FALSE) BECAUSE 0=0 GIVES 1 (TRUE), 1=0 GIVES 0 (FALSE)</i>
PRINT 0=0=1:REM<i> 1 (TRUE) BECAUSE 0=0 GIVES 1 (TRUE), 1=1 GIVES 1 (TRUE)</i></div>

<h3>Colon After THEN</h3>
<div class="code">@TASK
A = INT(RND(10))
B = INT(RND(10))
@ASK
INPUT A + " + " + B, C
IF C = A+B THEN PRINT "CORRECT":GOTO TASK
PRINT "TRY AGAIN":GOTO ASK</div>
<p>If the user input is correct then the program will not only PRINT "CORRECT" but also GOTO TASK. 
If the condition is not met then the rest of the line is skipped, even if it contains          
several instructions separated with colon.                                                     </p> 


<h2><a name="fp3">Fun Project</a></h2>
<p>Have you noticed that you know everything you need to create a text 
adventure game? Feel free to change or add more options!</p>
<div class="code">BOREDOM=0:MONEY=0:GF=0
@HOME
PRINT "YOU ARE AT HOME. LIVING ALONE FEELS LONELY SOMETIMES..."
PRINT "BUT YOU CAN JUMP ON YOUR BED IF YOU LIKE."
BOREDOM=BOREDOM+1
IF BOREDOM>10 THEN GOTO DEATH
IF BOREDOM<>3 THEN GOTO HOMEASK
PRINT "YOU STAND UP ON THE BED TO JUMP. YOU FEEL SOMETHING..."
PRINT "PUSHING YOUR FOOT. HEY! YOU FOUND A COIN BELOW THE BEDSHEET!"
MONEY=1
@HOMEASK
INPUT "STAY OR LEAVE?", MOVE$
IF MOVE$="STAY" THEN GOTO HOME
IF MOVE$="LEAVE" THEN GOTO STREET
GOTO HOMEASK
@DEATH
PRINT "LIFE IS SO BORING THAT YOU DIED. GRAY RATS WHO JUST HAD BEEN"
PRINT "LINGERING THERE ARE LISTLESSLY EATING YOUR BODY."
END
@STREET
PRINT "FRESH AIR! THE STREET IS CROWDED AS USUAL."
PRINT "YOU STAND JUST IN FRONT OF YOUR HOME"
IF BOREDOM>3 AND MONEY=0 THEN GOTO SELL
@STREETASK
INPUT "WHERE WOULD YOU GO? CENTER, OUTSKIRTS, HOME?", MOVE$
IF MOVE$="CENTER" THEN GOTO CENTER
IF LEFT$(MOVE$, 3)="OUT" THEN GOTO OUTSKIRTS
IF MOVE$="HOME" THEN GOTO HOME
GOTO STREETASK
@CENTER
PRINT "MALLS AND RESTAURANTS ALL AROUND. YOU FEEL LIKE SHOPPING!"
IF MONEY=0 THEN PRINT "WISH YOU HAD ANY MONEY :(":GOTO CENTERASK
IF GF=1 THEN GOTO FLOWERS
PRINT "YOU BOUGHT A GOLDEN PIGLET. IT'S A PERFECT PRESENT."
PRINT "YOU JUST NEED... SOMEBODY TO GIVE IT."
GOTO BOUGHT
@FLOWERS
PRINT "YOU BOUGHT SOME FLOWERS FOR YOUR GF."
PRINT "IT'S SO NICE TO HAVE HER."
END
@BOUGHT
MONEY=0
@CENTERASK
INPUT "STAY OR STREET?", MOVE$
IF MOVE$="STAY" THEN GOTO CENTER
IF MOVE$="STREET" THEN GOTO STREET
GOTO CENTERASK
@OUTSKIRTS
IF GF=1 THEN GOTO OUTASK
PRINT "YOU REMEMBER A GIRL YOU USED TO KNOW FROM SCHOOL."
PRINT "MAYBE IT'S BECAUSE SHE LIVED HERE."
PRINT "OR MAYBE IT'S BECAUSE YOU ALWAYS THINK OF HER EVER SINCE."
@OUTASK
INPUT "YOU STAND RIGHT AT THE GIRL'S DOOR. KNOCK OR STREET?", MOVE$
IF MOVE$="KNOCK" THEN GOTO KNOCK
IF MOVE$="STREET" THEN GOTO STREET
GOTO OUTASK
@KNOCK
IF GF=1 THEN GOTO LOVE
PRINT "'HEY, IS THAT REALLY YOU? I REMEMBER THE SHY GUY FROM SCHOOL. HAHA!'"
PRINT "YOU TALK A LITTLE. SHE ASKS ABOUT YOUR LIFE."
IF MONEY=0 THEN GOTO DECLINE
GF=1
PRINT "SHE TELLS YOU THAT SHE LIKES FLOWERS. SHE FEELS ALONE. SHE LIKES TO"
PRINT "JUMP ON HER BED. SHE SHOWS HOW."
@LOVE
PRINT "YOU STAY UNTIL THE MORNING COMES."
@DECLINE
PRINT "SHE ASKS YOU TO LEAVE AS SHE HAS IMPORTANT THINGS TO DO."
GOTO OUTASK
@SELL
PRINT "A BAD LOOKING MAN IS APPROCHING. HE WANTS TO SELL YOU STOLEN WEAPONS."
PRINT "HE WOULD BUY THINGS OF VALUE, TOO. YOU THINK OF SELLING THE PIGLET."
INPUT "SELL OR LEAVE?", MOVE$
IF MOVE$="SELL" THEN MONEY=1:PRINT "YOU GET A COIN."
GOTO STREET</div>


<h2><a name="383">Operator Summary</a></h2>

<h3>Precedence</h3>
<div class="code">REM<i> ^            	    LEVEL 1</i>
PRINT 2 * 3^2:REM<i> 18</i>
PRINT (2*3)^2:REM<i> 36</i>
REM<i> / * MOD     	    LEVEL 2</i>
PRINT 1 + 2*3:REM<i> 7</i>
PRINT (1+2)*3:REM<i> 9</i>
REM<i> + -          	    LEVEL 3</i>
PRINT 6 &lt; 10+2:REM<i> 1</i>
PRINT (6&lt;10)+2:REM<i> 3</i>
REM<i> &lt;> >= > &lt;= &lt; 	    LEVEL 4</i>
PRINT 2 = 4&lt;>3:REM<i> 0</i>
PRINT (2=4)&lt;>3:REM<i> 1</i>
REM<i> =            	    LEVEL 5</i>
PRINT 1 AND 3 = 1:REM<i> 0</i>
PRINT (1 AND 3)=1:REM<i> 1</i>
REM<i> AND          	    LEVEL 6</i>
PRINT 1 OR 3 AND 2:REM<i> 3</i>
PRINT (1 OR 3)AND 2:REM<i> 2</i>
REM<i> OR XOR      	    LEVEL 7</i>
PRINT 1, 2 OR 4:REM<i> [1, 6]</i>
REM<i> ,            	    LEVEL 8</i>
<hr/>REM<i> * OTHER OPERATORS ON THE SAME PRECEDENCE LEVELS *</i>
PRINT 18 / 3^2:REM<i> 2</i>
PRINT 6 + 4/2:REM<i> 8</i>
PRINT 6 - 4/2:REM<i> 4</i>
PRINT 6 &lt; 10-2:REM<i> 1</i>
PRINT 9 > 10-2:REM<i> 1</i>
PRINT 8 &lt;= 10-2:REM<i> 1</i>
PRINT 8 >= 10-2:REM<i> 1</i>
PRINT 1 = 4>3:REM<i> 1</i>
PRINT 3 = 3&lt;2:REM<i> 0</i>
PRINT 1 = 4>=4:REM<i> 1</i>
PRINT 0 = 1&lt;=1:REM<i> 0</i></div>

<h3>Associativity</h3>
<div class="code">REM<i> * ALL OPERATORS LEFT-ASSOCIATIVE (INCLUDING POWER, UNLIKE IN MATHS) *</i>
PRINT 2^3^2:REM<i> 64</i>
PRINT 2^(3^2):REM<i> 512</i>
PRINT 100/20/5:REM<i> 1</i>
PRINT 100/(20/5):REM<i> 25</i>
PRINT 100-20-5:REM<i> 75</i>
PRINT 100-(20-5):REM<i> 85</i>
PRINT 3>2>1:REM<i> 0 (FALSE) BECAUSE 3>2 GIVES 1 (TRUE), 1>1 GIVES 0 (FALSE)</i>
PRINT 3>(2>1):REM<i> 1 (TRUE) BECAUSE 2>1 GIVES 1 (TRUE), 3>1 GIVES 1 (TRUE)</i></div>

<h3>The Unary Minus Sign</h3>
<div class="code">REM<i> * UNARY MINUS HAS LOWER PRECEDENCE THAN POWER *</i>
PRINT -2^2:REM<i> -4</i>
PRINT (-2)^2:REM<i> 4</i>
REM<i> * UNARY MINUS HAS HIGHER PRECEDENCE THAN ADD OR SUBTRACT *</i>
PRINT -2+2:REM<i> 0</i>
PRINT -(2+2):REM<i> -4</i></div>

<h2><a name="438">GOSUB and RETURN</a></h2>
<div class="code">PRINT "VERSE 1"
GOSUB CHORUS:REM<i> GO TO SUBPROGRAM AT @CHORUS BUT COME BACK WHEN IT'S DONE</i>
PRINT "VERSE 2"
GOSUB CHORUS:REM<i> NOTE THAT THE SAME SUBPROGRAM CAN RETURN HERE, TOO</i>
GOTO OUTRO
@CHORUS: PRINT "CHORUS"
RETURN:REM<i> SUB IS OVER, GO BACK TO THE POINT AFTER GOSUB (THE RIGHT GOSUB)</i>
@OUTRO: PRINT "OUTRO"</div>

<h2><a name="448">END and STOP</a></h2>
<div class="code">PRINT "VERSE 1"
GOSUB CHORUS
PRINT "VERSE 2"
GOSUB CHORUS
PRINT "OUTRO"
END:REM<i> PREVENTS RUNNING THE CHORUS AGAIN</i>
@CHORUS: PRINT "CHORUS"
RETURN
<hr/>PRINT "STEP 1"
STOP
PRINT "STEP 2"
STOP
PRINT "STEP 3"
REM<i> * ENTER INTERACTIVE COMMAND CONT TO CONTINUE *</i>
REM<i> * ENTER INTERACTIVE COMMAND RUN TO START OVER *</i>
REM<i> * ?STATUS TO TELL STOP (1) FROM END (0) OR ERROR (-1) *</i></div>

<h2><a name="460">Command Summary</a></h2>
Here are all the commands that you can use on the command line:<ul>
<li>RUN - run the program that is tokenized in the runner</li>
<li>CONT - continue where the program exited (at a STOP instruction or if user hit Esc)</li>
<li>LIST - change screen mode to Program Listing</li>
<li>NEW - clear the program from both the Program Listing and runner</li>
<li>OLD - restore the program after NEW</li>
<li><a href="#DGNS">DGNS - see Game Programming Tutorial</a></li>
<li>Question mark: enter <a href="#201">an expression</a> following 
<span style="code">?</span> to see its value.</li>
<li>By entering a programming instruction, you add a line to the end of the program</li>
</ul>

<h2><a name="465">FOR and NEXT</a></h2>
<p>Wanna do something 10 times?</p>
<div class="code">FOR I=1 TO 10:PRINT "THIS OLD MAN, HE PLAYED " + I:NEXT</div>
<p>What more can FOR loops do?</p>
<div class="code">FOR I=0 TO 9
	A$ = " "
	REM<i> * ANOTHER LOOP INSIDE THE LOOP         *</i>
	REM<i> * THE END OF THE LOOP IS AN EXPRESSION *</i>
	REM<i> * THE COUNTER J WILL STEP DOWN         *</i>
	FOR J=9 TO 9-I STEP -1
		A$ = A$ + J
	NEXT
	PRINT A$
NEXT I
REM<i> * THIS SYNTAX OF NEXT MAKES SURE THAT IT ENDS THE CORRECT LOOP: IF  *</i>
REM<i> * THE PROGRAM FLOW ACCIDENTALLY HITS IT WHEN THERE IS NO LOOP FOR I *</i>
REM<i> * THEN INSTEAD OF CONTINUING THE WRONG FLOW, IT IMMEDIATELY STOPS   *</i>
<hr/>FOR I=10 TO 45 STEP 10:PRINT I:NEXT
PRINT "LOOP EXITED WITH " + I
REM<i> I NEVER GETS EXACTLY 45, LAST CYCLE STARTS WITH I=40, EXITS WITH I=50</i>
<hr/>REM<i> * BREAKING THE LOOP EARLY *</i>
INPUT "SELL YOUR STOCKS AFTER HOW MANY DAYS?", CUT
FOR I=1 TO RND(30)
	PRINT "DAY "+I
	PRINT "STOCKS HIGH":PRICE=I
	IF I=CUT THEN I=30:NEXT:GOTO OUT
	PRICE=1:PRINT "STOCKS LOW"
NEXT
@OUT
PRINT "STOCKS SOLD FOR "+PRICE</div>
<p>Evaluations:<ul>
<li>The TO expression is evaluated once when the FOR instruction is reached.</li>
<li>The loop counter is checked against the evaluated TO value when NEXT is reached.</li>
<li>Therefore: at the FOR instruction, the loop cannot exit
without entering the loop body. Which exit point (of the several NEXT 
instructions) would it take? <span onclick="alert(this.title)" title="That's why they say that this language is not structured: any instruction encountered (while running!) before a NEXT becomes part of the loop. Structured languages would define (before running!) a block of instructions that build up that loop.">[Scientists'
Note]</span></li></ul></p>
<p>When breaking a loop in an IF condition, make sure:<ol>
	<li>that the loop counter is over the TO value &ndash; I=30</li>
	<li>to say NEXT so that the loop is cleaned up &ndash; NEXT</li>
	<li>to jump over all the other NEXT instructions &ndash; GOTO OUT</li>
</ol></p>
</ul>
<h1>Details of the Language</h1>
<p>OK, the essentials are now done. You can jump to <a href="#game">Game 
Programming Tutorial</a> if you are in a hurry. You'll be able to follow, but 
some particular instructions you'll need to look up in this second part. There 
are still some details about the language, so read on to learn them all.</p>

<h2><a name="496">DATA and READ</a></h2>
<div class="code">REM<i> * READ ASSIGNS THE NEXT VALUE FROM THE DATA LINE TO ITS ARGUMENT *</i>
FOR I=1 TO 5:READ A:PRINT A:NEXT
DATA 2,3,5,7,11</div>

<h3><a name="d1">Evaluation order</a></h3>
<div class="code">READ A:READ B:A=9:READ C
PRINT A,B,C
DATA RND(8)
DATA A, A + 1</div>
<p>On READ A, first data line is evaluated, a random number gets generated. </p>
<p>On READ B, second data line evaluates (both elements of it at once.) Now variable A holds  
the randomized number, so B gets the same value as A. </p><p>Then A=9 assignment happens.         
C gets the already evaluated value, which is the random number plus 1 (the new value of A, 
9, does not affect C's.)                               </p>                                


<h2><a name="513">RESTORE</a></h2>
<p>Restore to the beginning</p>
<div class="code">GOSUB POEM
PRINT "*"
GOSUB POEM
END
@POEM
RESTORE
REM<i> * RESTORE INSTRUCTION MAKES SURE THE POEM STARTS WITH THE FIRST LINE *</i>
REM<i> *      NO MATTER HOW MANY TIMES THE PROGRAM RUNS THE SUBPROGRAM      *</i>
FOR LINE=1 TO 5:READ L$:PRINT L$:NEXT LINE
RETURN
DATA "THERE WAS AN OLD MAN WITH A BEARD,"
DATA "WHO SAID, 'IT IS JUST AS I FEARED!"
DATA "TWO OWLS AND A HEN,", "FOUR LARKS AND A WREN,"
DATA "HAVE ALL BUILT THEIR NESTS IN MY BEARD!'"</div>
<p><a name="rtl">Restore to a label</a></p>
<div class="code">RESTORE WEEKEND
FOR I=1 TO 14
	READ DAY$:PRINT DAY$ + " " + I
	IF DAY$ = "SUN" THEN RESTORE
NEXT
END
DATA "MON", "TUE", "WED", "THU", "FRI"
@WEEKEND: DATA "SAT", "SUN"</div>

<h2><a name="540">DIM</a></h2>
<div class="code">REM<i> * BUBBLE SORT *</i>
DIM ARRAY(10)
INPUT ARRAY(0)
FOR I=1 TO 9
	READ ARRAY(I)
NEXT
FOR K=8 TO 0 STEP -1
	FOR I=0 TO K
		IF ARRAY(I)>ARRAY(I + 1) THEN NEXT I:GOTO OUT
		SWAP = ARRAY(I)
		ARRAY(I) = ARRAY(I + 1)
		ARRAY(I + 1) = SWAP
	NEXT I
	@OUT
	PRINT ARRAY(I)
NEXT K
PRINT ARRAY(0)
END
DATA 1, 2, 3, 5, 9, 8, 7, 4, 6</div>

<h2><a name="561">POKE</a></h2>
<p>Store a byte in the memory by address.</p>
<div class="code">POKE 5000,6
REM<i> 5000 IS THE ADDRESS, 6 IS THE BYTE</i>
PRINT PEEK(5000)</div>

<h2><a name="567">CLR</a></h2>
<p>Clear all variables and arrays. Built-in variables restored.</p>
<div class="code">PI = 3.0
PRINT PI
CLR
PRINT PI</div>
<p>Bytes in memory survive a CLR.</p>
<div class="code">POKE 5000,6
CLR
PRINT PEEK(5000):REM<i> 6</i></div>

<h2><a name="579">DEF</a></h2>
<div class="code">LOG2 = LOG(2)
DEF LOG2(X) = LOG(X)/LOG2
X=10
PRINT LOG2(32)
PRINT X</div>
<p>CLR will erase user-defined functions, too.</p>
<div class="code">DEF TWICE(N) = 2*N
DIM ARRAY(10)
CLR
DIM TWICE(10):REM<i> NOT AN OVERDEFINITION</i>
DEF ARRAY(N) = 2*N:REM<i> NOT AN OVERDEFINITION</i></div>

<h2><a name="593">ON</a></h2>
<p>With IF instruction, you gave your program two possible continuation paths: one 
to go when the condition is true, one if it is false. What if you want three
or more continuation paths, depending on a numeric expression?</p>
<div class="code">INPUT "CHOOSE FROM MENU 1-3", CHOICE
ON CHOICE GOTO M1, M2, M3
@M1: PRINT "YOU CHOSE #1"
END
@M2: PRINT "YOU CHOSE #2"
END
@M3: PRINT "YOU DIDN'T CHOOSE 1 OR 2 BUT SOMETHING ELSE"
END
<hr/>INPUT "CHOOSE FROM MENU 1-3", CHOICE
ON CHOICE GOSUB M1, M2, M3
GOTO START
@M1: PRINT "YOU CHOSE #1"
RETURN
@M2: PRINT "YOU CHOSE #2"
RETURN
@M3: PRINT "YOU DIDN'T CHOOSE 1 OR 2 BUT SOMETHING ELSE"
RETURN</div>
<p>A trick to save a line of code:</p>
<div class="code">INPUT N
ON N>0 GOTO POSITIVE, NONPOSITIVE:REM<i> IF N>0 IS TRUE, BRANCH 1 IS SELECTED</i>
@POSITIVE:PRINT "POSITIVE":END
@NONPOSITIVE:PRINT "NONPOSITIVE":END
<hr/>INPUT N
IF N>0 THEN GOTO POSITIVE
GOTO NONPOSITIVE:REM<i> THIS NEEDS TO BE ON A SEPARATE LINE</i>
@POSITIVE:PRINT "POSITIVE":END
@NONPOSITIVE:PRINT "NONPOSITIVE":END
</div>

<h2><a name="613">Multidimensional Arrays</a></h2>
<p>You may use the comma operator in the array index to create a matrix.</p>
<div class="code">DIM MANCALA(6,2)
MANCALA(4,1) = 0
MANCALA(5,1) = MANCALA(4,1)+1</div>

<h2><a name="618">Non-Unary Functions</a></h2>

<h3>Nullary</h3>
<div class="code">D12 = RND(12)+1
PRINT D12
REM<i> * GIVES 12 JUST AS OFTEN AS 7 *</i>
CLR
D12 = RND(6)+RND(6)+2
REM<i> * RANDOM WITH THE DISTRIBUTION OF ROLLING 2 REGULAR DICE *</i>
PRINT D12
PRINT D12
PRINT D12
REM<i> * EVALUATION HAPPENS ONCE, SAME NUMBER IS PRINTED 3 TIMES *</i>
CLR
DEF D12()=RND(6)+RND(6)+2
REM<i> * NULLARY FUNCTION *</i>
PRINT D12()
PRINT D12()
PRINT D12()
REM<i> * ROLLS THREE TIMES *</i></div>

<h3>Higher Arities</h3>
<div class="code">DEF MAX(A,B)=(A>=B)*A+(A&lt;B)*B
PRINT MAX(-3,MAX(5/2,8/4))</div>

<h2><a name="642">Abbreviations</a></h2>
<div class="code">REM<i> * T. IS SHORT FOR THEN *</i>
REM<i> * G. IS SHORT FOR GOTO *</i>
REM<i> * N. IS SHORT FOR NEXT *</i>
REM<i> * R. STANDS FOR RETURN *</i>
REM<i> * <a href="#wait-abbr">W.  (COVERED LATER)</a>  *</i>
'<i>OH, AND YOU CAN USE APOSTROPHE INSTEAD OF REM INSTRUCTION</i>
INPUT "ENTER REQUESTED INDIAN COUNT", N '<i>NO NEED FOR A COLON</i>
IF N>10 T.G.HANDLER
S$=""
FOR I=1 TO N
	GOSUB INDIAN
	S$="S"
N.
END
@HANDLER: 
	PRINT "TOO MANY INDIANS"
	STOP
@INDIAN: 
	PRINT I+" LITTLE INDIAN"+S$
	R.</div>

<h2><a name="653">PUSH and PULL</a></h2>
<p>Do you know the <a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)" target="_BLANK">stack</a> data structure? You can use it like this:</p>
<div class="code">PUSH 1:PUSH 2:PUSH 3
PULL C:PULL B:PULL A '<i>REVERSE ORDER</i>
PRINT A,B,C
<hr/>REM<i> * SEND OVER SOMETHING TO A SUB VIA STACK *</i>
PUSH "MESSAGE"
GOSUB SHOW
END
@SHOW
PULL RA '<i>AFTER GOSUB THE RETURN ADDRESS IS ON THE STACK TOP!</i>
PULL M$ '<i>HERE IS YOUR MESSAGE</i>
PUSH RA '<i>BEFORE RETURN, YOU NEED TO PUT BACK THE ADDRESS THAT WAS THERE</i>
PRINT M$
RETURN</div>
<p>PUSH and PULL may mess up running of other instructions if they are not used 
in pairs. Use them at your own risk.</p>

<h3>Motivation</h3>
<p>This technique allows recursive calls.</p>
<div class="code">DIM PEG$(3)
PEG$(1)=" A:4321"
PEG$(2)=" B:"
PEG$(3)=" C:"
PRINT PEG$(1) + PEG$(2) + PEG$(3)
STEP=1
N=4:SOURCE=1:VIA=3:TARGET=2:GOSUB MOVE
END
@MOVE
IF N=0 THEN RETURN
PUSH N:PUSH SOURCE:PUSH VIA:PUSH TARGET
N=N-1:S=VIA:VIA=TARGET:TARGET=S:GOSUB MOVE
PULL TARGET:PULL VIA:PULL SOURCE:PULL N
PEG$(TARGET)=PEG$(TARGET)+RIGHT$(PEG$(SOURCE), 1)
PEG$(SOURCE)=LEFT$(PEG$(SOURCE), LEN(PEG$(SOURCE))-1)
M$ = STEP + ". MOVE DISC FROM " + CHR$(64+SOURCE) + " TO "
PRINT M$ + CHR$(64+TARGET) + ":" + PEG$(1) + PEG$(2) + PEG$(3)
STEP = STEP + 1
PUSH N:PUSH SOURCE:PUSH VIA:PUSH TARGET
N=N-1:S=SOURCE:SOURCE=VIA:VIA=S:GOSUB MOVE
PULL TARGET:PULL VIA:PULL SOURCE:PULL N
RETURN</div>

<h2><a name="663">Run Time Errors</a></h2>

<h3>ILLEGAL EXPRESSION</h3>
<div class="code">PRINT "A"-1</div>

<h3><a name="novalue">NO VALUE</a></h3>
<div class="code">CLR
PRINT NOSUCH
<hr/>DATA XX+1, YY+1
XX=0
READ Y:REM<i> TRIES TO EVALUATE THE WHOLE DATA LINE, INCLUDING YY+1</i>
YY=0:REM<i> TOO LATE</i>
<hr/>DIM A$(8)
A$(1) = ""
PRINT A$(1):REM<i> FINE</i>
PRINT A$(2):REM<i> NO VALUE</i>
REM<i> * MAKE SURE YOU INITIALIZE ALL MEMBERS OF YOUR ARRAY BEFORE USE *</i></div>

<h3>INVALID REFERENCE</h3>
<div class="code">CLR
INPUT UNARRAY(0)
<hr/>SIN(0) = 0</div>

<h3>NEXT WITHOUT FOR</h3>
<div class="code">FOR I=0 TO 10
	IF I=5 THEN I=10:NEXT
	REM<i> *     WHAT HAPPENS WHEN I=5? IF CONDITION MET, I GETS 10    *</i>
	REM<i> *    NEXT ABOVE WILL TERMINATE THE LOOP AND CONTINUE HERE   *</i>
	REM<i> * THE OTHER NEXT WILL ALSO RUN BUT THERE IS NO LOOP ANYMORE *</i>
NEXT</div>

<h3>RETURN WITHOUT GOSUB</h3>
<div class="code">GOSUB SUB
REM<i> * NOTE: AFTER RETURNING FROM THE SUB, PROGRAM CONTINUES HERE *</i>
@SUB
RETURN</div>

<h3>LOOP MISMATCH</h3>
<div class="code">FOR I=1 TO 10:NEXT J</div>

<h3>OVERDEFINITION</h3>
<div class="code">DIM SIN(10)
<hr/>DEF FN(PM)=-PM
DIM FN(10)
<hr/>DIM ARR(10)
DEF ARR(X)=-X</div>

<h3>OUT OF DATA</h3>
<div class="code">REM<i> * OOPS, OFF BY ONE *</i>
FOR I=0 TO 10:READ X:NEXT
DATA 1, 2, 3, 4, 5, 6, 7, 8, 9, 10</div>

<h3>LABEL DOES NOT EXIST</h3>
<div class="code">GOTO PI
<hr/>GOSUB PI
<hr/>RESTORE PI</div>

<h3>NO DATA AT LABEL</h3>
<div class="code">RESTORE LABEL
@LABEL:PRINT "NOT A DATA INSTRUCTION"
DATA 1</div>

<h3>DIVIDE BY ZERO</h3>
<div class="code">A = 1/0</div>

<h2><a name="738">Contrasting C64</a></h2>
<p>This programming language is inspired by C64 BASIC V2.</p>
Inspiration means that:<ul>
<li>Those who know C64 BASIC V2 will find it easy to learn.</li>
<li>Program flow and instructions are on the same abstraction level.</li>
</ul>
But not:<ul>
<li>Easy portability of programs between both.</li>
<li>Any intent to converge to C64 in the future versions of imeight.</li>
<li>That they would be comparable in performance.</li>
</ul>
<p>In other words, imeight is not what C64 was, it is what it should have been.</p>

<h3>List of Intentional Differences</h3>
Dollar or percent sign at the end of names is a convention
<div class="code">A% = "HELLO"
A$ = 3
REM<i> * BOTH WORK BUT DISCOURAGED *</i></div>
The full name of the variable identifies
<div class="code">VAR1 = 1:VAR2 = 2:REM<i> TWO DISTINCT VARIABLES HERE</i>
PRINT VAR1,VAR2</div>
Use spaces to separate names from operators
<div class="code">SCORE = 30
SC = 1:E = 2
PRINT SCORE:REM<i> 30</i>
PRINT SC OR E:REM<i> 3</i></div>
Dimensions in DIM is documentation of intended indexing. It does not limit the
usage of the array as it is _not_ memory allocation. Programmer may use 
zero-based or one-based indexing, interpret DIM numbers as maximal index or 
number of elements... to taste.
<div class="code">DIM A(2)
A(-1)=0
A(8)=0
A(2,1)=0
REM<i> * ALL OF THE ABOVE IS LEGAL ALTHOUGH THE CODE IS MISLEADING *</i></div>
More differences that are already mentioned:<div class="contents">
<a href="#d1">DATA evaluation</a>
&bull; <a href="#642">Abbreviations</a>
&bull; <a href="#299">Concept of labels</a>
&bull; <a href="#rtl">RESTORE to a label</a>
&bull; <a href="#novalue">Unassigned variables: initialization enforced</a>
&bull; <a href="#567">Built-in variables</a>
&bull; <a href="#numop">FRAC function, MOD and XOR operators added</a>
&bull; <a href="#numlit">Hexadecimal, binary, 4-based number literals</a>
&bull; <a href="#460">Distinguishing interactive commands from programming instructions</a>
&bull; More sophisticated data structures internally to speed up execution
</div>























<h1><a name="game">Game Programming Tutorial</a></h1>
<p>OK, that was boring. Fortunately this imaginary little machine has all the
necessary stuff for action game programming, too. You'll need controls,
timing and graphics. Let's go!</p>

<h2><a name="2001">WAIT and GET</a></h2>
<p>WAIT instruction halts execution of your program until one of the 
events occur:</p><ul>
<li>A button on the keyboard is hit or released. Note that in the emulator, you 
need to focus (click) on the Graphic Screen to get keystroke events.</li>
<li>Clock ticks. It constantly ticks every 20 milliseconds. So a WAIT 
instruction returns after 20 milliseconds max, depending on what moment
it started to run. E.g. just after another WAIT, it's exactly 20 ms.</li>
</ul>
<p>GET instruction assigns the key code of the key hit on the keyboard to the 
variable in argument. Consecutive GETs will process the key hits in 
chronological order.</p>
<p>Key codes:</p><ul>
<li>If no button has been hit (since all of the events had been processed by GET 
instructions) then GET assigns the value 0.</li>
<li>Letter buttons have key codes 65 through 90, according to ASCII.</li>
<li>Number buttons have key codes 48 through 57, according to ASCII.</li>
<li>Numpad is differentiated, encoded 96 to 105.</li>
<li>32 is Space bar, 27 means Escape button, 13 is Enter, 9: Tab.</li>
<li>Shift and Ctrl buttons - 16 and 17, respectively.</li>
<li>Function keys 112-123 (those may activate functions in your browser, too.)</li>
<li>When Shift or Ctrl is still pressed while another key is hit, .5 or .25 is 
added to its key code, respectively.</li>
<li>On release, the negated key code is assigned by GET.</li>
</ul>
<div class="code">SECS=10:AN=10
PRINT "ENTER "+AN+" ANIMALS IN "+SECS+" SECONDS"
T$="":TICKS=0
@LOOP:GET KEY
IF KEY=27 THEN PRINT "GIVEN UP?":END
IF KEY&lt;=0 THEN WAIT:TICKS=TICKS+1
IF KEY>31 AND 128>KEY THEN T$=T$+CHR$(KEY)
IF KEY=13 THEN AN=AN-1:PRINT T$+" ACCEPTED, "+AN+" STILL TO GO!":T$=""
IF AN=0 THEN PRINT "YOU WIN.":END
IF TICKS>50 THEN SECS=SECS-1:PRINT SECS+" SECONDS LEFT...":TICKS=0
IF SECS=0 THEN PRINT "YOU LOSE.":END
GOTO LOOP</div>

<h3>Motivation</h3>
<p>Busy loops without any WAIT in them run for times highly dependent on the 
configuration that runs the program.</p>
<div class="code">REM<i> * PROCESSOR HEATING CODE RUNS FOR 1 S ON MY LAPTOP, HOW ABOUT YOURS? *</i>
FOR I=0 TO 2600000:NEXT<hr/>FOR I=0 TO 50:WAIT:NEXT
'<i>CPU IS COOLER AND PROGRAM RUNS FOR 1 SECOND</i></div>

<h3>Clearing Past Events</h3>
<div class="code">FOR I=1 TO 500:WAIT:N. '<i>WAIT 10 SECS: USER MAY HIT KEYS MEANWHILE</i>
PRINT "HIT A BUTTON NOW:"
@GETLOOP:WAIT:GET A '<i>PROGRAMMER MAY THINK THIS WAIT AND GET BELONG TOGETHER</i>
IF A=0 T.G.LOOP
PRINT A
REM<i> * KEY CODE OF FIRST HIT SINCE PROGRAM START GETS PRINTED *</i>
REM<i> *    NOT NECESSARILY ONE HIT WHILE WAITING AT GETLOOP    *</i>
<hr/>FOR I=1 TO 500:WAIT:N.
@ZAP:GET A:IF A&lt>0 THEN GOTO ZAP '<i>CLEAR ALL PAST EVENTS</i>
PRINT "HIT A BUTTON NOW:"
@LOOP:WAIT:GET A '<i>NOW THIS WILL GET A YOUNG EVENT</i>
IF A=0 T.G.LOOP
PRINT A
<hr/>FOR I=1 TO 500:WAIT:N.
<a href="#567">CLR</a> '<i>CLEAR ALL PAST EVENTS (AND ALL VARIABLES ETC.)</i>
PRINT "HIT A BUTTON NOW:"
@LOOP:WAIT:GET A
IF A=0 T.G.LOOP
PRINT A</div>

<h3><a name="wait-abbr">Abbreviation</a></h3>
<div class="code">FOR I=1 TO 50:W.:N. '<i>WAIT >980 BUT &lt=1000 MILLISECONDS</i></div>


<h2><a name="2002">TIME and TIME$</a></h2>
<div class="code">PRINT TIME() '<i>MILLISECONDS SINCE EPOCH, 1 JAN 1970</i>
PRINT TIME$(0) '<i>THE EPOCH IN A HUMAN READABLE FORMAT</i>
PRINT TIME$(TIME()) '<i>CURRENT DATE AND TIME, UTC</i>
FOR I=0 TO 50:W.:N. '<i>WAIT (MORE THAN) A SECOND...</i>
PRINT TIME$() '<i>CURRENT DATE AND TIME, SHORTER WAY</i>
REM<i> * LAST TWO LINES SHOULD DIFFER IN 1 SECOND *</i></div>
<p>Timing for less than 20 milliseconds:</p>
<div class="code">UNTIL=TIME()+10 '<i>10 MILLISECONDS FROM NOW</i>
@BUSY:IF TIME()&lt;UNTIL T.G.BUSY</div>

<h3>Time Zones</h3>
<div class="code">PRINT TIME$(TIME()+2*3.6E6) '<i>IN B TIME ZONE OFFSET</i>
PRINT TIME$(TIME()+TZO) '<i>IN LOCAL TIME ZONE OFFSET</i></div>

<h2><a name="2003">Sprites!</h2>

<h3>My First Animation</h3>
<div class="code">SPRX(0)=180+160*COS(TIME()/600)
SPRY(0)=96+60*SIN(TIME()/300)
WAIT
GOTO START</div>
<p>Finally we can open the Graphic Screen and see something.</p>
<p>SPRX and SPRY are built-in arrays. SPRX(K) for every K would mean the 
horizontal coordinate of the sprite K; SPRY(K) is the vertical 
coordinate of the same. Coordinates are in pixels, horizontal coordinate 
0 is the left edge of the screen, screen is 384 pixels wide. Y coordinates
go from top to bottom, screen is 216 pixels high. The sprite itself is 24 by 24
pixels.</p>

<h3>Physical Animations</h3>
<div class="code">SCREENWIDTH=384:SCREENHEIGHT=216
'<i>START IN THE MIDDLE OF THE SCREEN</i>
SPRX(0)=SCREENWIDTH/2-12:SPRY(0)=SCREENHEIGHT/2-12
@HIT '<i>HIT THE BALL IN A RANDOM DIRECTION</i>
SPEEDX=RND(40)/10-2:SPEEDY=RND(40)/10-2 '<i>PIXELS PER 20 MILLISECONDS</i>
@LOOP
'<i>ADVANCE BALL POSITION ACCORDING TO SPEED</i>
SPRX(0)=SPRX(0)+SPEEDX
SPRY(0)=SPRY(0)+SPEEDY
'<i>BOUNCE ON SCREEN EDGES</i>
IF SPRX(0) &lt;= 0 OR SPRX(0) >= SCREENWIDTH-24 THEN SPEEDX = -SPEEDX
IF SPRY(0) &lt;= 0 OR SPRY(0) >= SCREENHEIGHT-24 THEN SPEEDY = -SPEEDY
WAIT:GET A
<a href="#593">ON</a> A>0 GOTO HIT, LOOP 'LOOP IF KEY CODE&lt;=0; GOES TO HIT OTHERWISE</div>
<p>The above algorithm appears in Billiard games, Pong or Breakout.</p>
<div class="code">WT=384:HT=216
<a href="#540" title="About the DIM instruction from Part 2">DIM</a> SPEEDX(99):DIM SPEEDY(99)
N=0
@SPAWN
N=N+1
SPRX(N)=0:SPRY(N)=0
SPEEDX(N)=RND(30)/10:SPEEDY(N)=0
@LOOP
FOR I=1 TO N
	IF SPRY(I) &lt; 0 THEN NEXT:GOTO OUT
	SPRX(I)=SPRX(I)+SPEEDX(I)
	SPRY(I)=SPRY(I)+SPEEDY(I)
	IF SPRX(I) &lt;= 0 OR SPRX(I) >= WT-24 THEN SPEEDX(I) = -SPEEDX(I)
	'<i>STOP A DEAD BALL</i>
	IF SPRY(I) >= HT-24 AND ABS(SPEEDY(I)) &lt; .5 THEN SPRY(I)=-24
	'<i>BOUNCE FROM THE GROUND AND LOSE SOME ENERGY</i>
	IF SPRY(I) >= HT-24 THEN SPEEDY(I) = -SPEEDY(I)*.9
	'<i>ADD GRAVITY</i>
	IF SPRY(I) >= 0 THEN SPEEDY(I)=SPEEDY(I)+.1
NEXT:@OUT
WAIT:GET A
ON A>0 GOTO SPAWN, LOOP</div>
<p>Combine bouncing with gravity for an effect like in Flipper, ballistic
games. A jumping character can as well be animated using gravity like above.</p>
<p>Note that setting a coordinate to -24 makes the sprite invisible.</p>

<h3><a name="DGNS">Tired of Balls?</a></h3>
<p>Issue the command DGNS on the Command Line to see the names of all built-in 
designs for your sprites. Use them like this:</p>
<div class="code">SPRDGN(0)=DGNMAN():SPRX(0)=0:SPRY(0)=0 '<i>MAN IS A BUILT-IN DESIGN</i>
SPRDGN(1)=DGNWALL():SPRX(1)=0:SPRY(1)=24 '<i>SO IS WALL</i></div>

<h3>How about some art?</h3>
<p>Design your own sprites in the Designer screen mode. You will see 227 slots
for designs in the Memory Map. Just choose slots, colors, and paint using the
mouse. Once done, copy the number from below the Memory Map, and set SPRDGN(K) 
to that number in the program.</p>
<div class="code">REM<i> ASSUMING YOU DREW SOMETHING INTO SLOT 2 IN THE DESIGNER</i>
SPRX(5)=0:SPRY(5)=0 '<i>THE UPPER LEFT CORNER</i>
SPRDGN(5)=288 '<i>THE SECOND DESIGN FROM THE MEMORY</i></div>


<h2><a name="fp4">Fun Project</a></h2>
<p>Find one bug in the list below. Correct it and have fun.</p>
<div class="code">WT=384:HT=216 '<i>SCREEN WIDTH AND HEIGHT</i>
BORINGNESS=10

REM<i> SPRITES</i>
REM<i> 0 TO 9:    ROAD LEFT SIDE</i>
REM<i> 10 TO 19:  ROAD RIGHT SIDE</i>
REM<i> 20:        CAR UNDER CONTROL</i>
REM<i> 21 AND ON: SPARE LIVES DISPLAYED</i>
REM<i> LAST:      CRASHED CAR</i>

@INIT
SPRX(20)=WT/2:SPRY(20)=180:SPRDGN(20)=DGNCAR()
FOR I=0 TO 9
  SPRX(I)=WT/4:SPRX(I+10)=WT/4*3
  SPRY(I)=I*24-23:SPRY(I+10)=SPRY(I)
  SPRDGN(I)=DGNDUST():SPRDGN(I+10)=DGNDUST()
N.
FOR I=1 TO LIFE:SPRX(20+I)=0:SPRY(20+I)=I*26-25:SPRDGN(20+I)=DGNCAR():N.
SPRY(21+LIFE)=0:SPRX(21+LIFE)=-24:SPRDGN(30)=DGNCAR()
ROADWT=WT/4 '<i>CURRENT ROAD WIDTH IN 2-PIXEL UNITS</i>
CARVX=0:CARVY=0 '<i>VELOCITY COMPONENTS</i>
DIRY=2
PRINT "HIT UP ARROW TO ACCELERATE"
PRINT "HIT LEFT OR RIGHT ARROW TO STEER"

@CONTROL
WAIT:GET A
IF A=-38 THEN CARVY=CARVY+1 '<i>UP</i>
IF CARVY&lt;1 T.G.CONTROL '<i>WAIT FOR THE PLAYER TO START THE GAME</i>
IF A=37 THEN CARVX=-CARVY '<i>LEFT</i>
IF A=39 THEN CARVX=CARVY '<i>RIGHT</i>
IF A=-37 OR A=-39 THEN CARVX=0 '<i>RELEASE</i>

SPRX(20)=SPRX(20)+CARVX '<i>CAR MOVES ACCORDING TO CONTROL</i>
FOR TM=1 TO CARVY
  SPRY(21+LIFE)=SPRY(21+LIFE)+1 '<i>LEAVE CRASHED CAR BEHIND</i>
  FOR I=0 TO 9
    SPRY(I)=SPRY(I)+1:SPRY(I+10)=SPRY(I) '<i>MOVE ROAD DOWN ON SCREEN</i>
    IF SPRY(I)&lt;HT T.G.ROLLEND '<i>24 RASTERS SCROLLED OUT?</i>
      OLDTOP=I+1:IF OLDTOP>9 THEN OLDTOP=0 '<i>WHICH SPRITES WERE ON SCREEN TOP?</i>
      DIRY=DIRY-1 '<i>Y COORDINATE OF WHERE THE ROAD IS HEADING</i>
      IF RND(DIRY)=0 THEN DIRX=RND(WT-2*ROADWT)+ROADWT:DIRY=16 '<i>CHANGE HEADING</i>
      SPRY(I)=-23:SPRY(I+10)=-23 '<i>REUSE THE SPRITES SCROLLED OUT</i>
      IF ROADWT>40 AND RND(BORINGNESS)=0 THEN ROADWT=ROADWT-2 '<i>LEVEL UP</i>
      SPRX(I)=(DIRX-ROADWT-SPRX(OLDTOP))/DIRY+SPRX(OLDTOP) '<i>LINEAR STEP</i>
      SPRX(I+10)=SPRX(I)+2*ROADWT
      @ROLLEND
    IF SPRY(I)&lt;=SPRY(20)-24 OR SPRY(I)>=SPRY(20)+24 T.G.COLLIDEEND
      IF SPRX(20)>=SPRX(I)+24 AND SPRX(20)&lt;=SPRX(I+10)-24 T.G.COLLIDEEND
        PRINT "BUMP!"
        LIFE=LIFE-1
        IF LIFE&lt;0 THEN PRINT "CRASH!":GOTO OVER
        GOSUB DIE:CARVY=1
      @COLLIDEEND
N.:N.

GOTO CONTROL

@DIE
XMID=(SPRX(I)+SPRX(I+10))/2
DX=XMID/16
DY=(SPRY(20)-SPRY(21+LIFE))/16
FOR J=0 TO 15
  SPRX(21+LIFE)=SPRX(21+LIFE)+DX+SIN(J*PI/8)*16
  SPRY(21+LIFE)=SPRY(21+LIFE)+DY
  WAIT:WAIT
N.
REM<i> CRASHED CAR APPEARS WHERE CAR UNDER CONTROL WAS</i>
SPRX(21+LIFE)=SPRX(20):SPRY(21+LIFE)=SPRY(20)
SPRX(22+LIFE)=-24 '<i>CAR CRASHED EARLIER STILL ON SCREEN?</i>
SPRX(20)=XMID '<i>THE CONTROLLED CAR KEEPS INDEX 20</i>
R.

@OVER
FOR I=1 TO 200:W.:N.</div>


<h2><a name="2004">Colors!</a></h2>
<div class="code">INPUT BACKGROUND '<i>YET ANOTHER BUILT-IN VARIABLE</i></div>
<div style="border: 1px white solid; padding: 8px"><table style="border-spacing: 16px 0">
	<tr>
		<th>Color</th>
		<th colspan="2">Dark</th>
		<th colspan="2">Light</th>
	</tr>
	<tr>
		<td>black/gray</td>
		<td align="right">0</td><td><span style="background:#000000">&nbsp;&nbsp;</span></td>
		<td align="right">8</td><td><span style="background:#333333">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>red</td>
		<td align="right">1</td><td><span style="background:#cc0000">&nbsp;&nbsp;</span></td>
		<td align="right">9</td><td><span style="background:#ff3333">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>green</td>
		<td align="right">2</td><td><span style="background:#00cc00">&nbsp;&nbsp;</span></td>
		<td align="right">10</td><td><span style="background:#33ff33">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>yellow</td>
		<td align="right">3</td><td><span style="background:#cccc00">&nbsp;&nbsp;</span></td>
		<td align="right">11</td><td><span style="background:#ffff33">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>blue</td>
		<td align="right">4</td><td><span style="background:#0000cc">&nbsp;&nbsp;</span></td>
		<td align="right">12</td><td><span style="background:#3333ff">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>magenta</td>
		<td align="right">5</td><td><span style="background:#cc00cc">&nbsp;&nbsp;</span></td>
		<td align="right">13</td><td><span style="background:#ff33ff">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>cyan</td>
		<td align="right">6</td><td><span style="background:#00cccc">&nbsp;&nbsp;</span></td>
		<td align="right">14</td><td><span style="background:#33ffff">&nbsp;&nbsp;</span></td>
	</tr>
	<tr>
		<td>gray/white</td>
		<td align="right">7</td><td><span style="background:#cccccc">&nbsp;&nbsp;</span></td>
		<td align="right">15</td><td><span style="background:#ffffff">&nbsp;&nbsp;</span></td>
	</tr>
</table></div>


<h2><a name="2005">Pixel Data Animations</a></h2>
<p>You can use POKE instructions to redesign the sprite while the program is
running. With love for fellow coordinate geometry lovers.</p>
<div class="code">DEF NEAR(A,B)=(A-B)^2&lt;2 '<i>DO NOT USE = TO COMPARE FLOATS</i>
SPRX(0)=180:SPRY(0)=96 '<i>CENTER</i>
SPRDGN(0)=0
@LOOP
WAIT:WAIT '<i>RECALCULATE ONCE PER SCREEN REFRESH</i>
X=COS(TIME()/318):Y=SIN(TIME()/318) '<i>MOVE X,Y IN CIRCLES OVER TIME</i>
FOR R=0 TO 23 '<i>FOR ALL ROWS OF THE DESIGN</i>
	FOR C=0 TO 23 STEP 2 '<i>FOR EVERY 2ND COLUMN OF IT</i>
		HI=0:LO=0 '<i>HIGH AND LOW NIBBLE OF THE DESIGN BYTE</i>
		FOR A=-11 TO 11 STEP 2 '<i>PARAMETER OF THE LINE'S EQUATION</i>
			IF NEAR(C, X*A+12) AND NEAR(R, Y*A+12) THEN HI=10*16
			IF NEAR(C+1, X*A+12) AND NEAR(R, Y*A+12) THEN LO=10
		NEXT
		POKE 12*R+INT(C/2),HI OR LO '<i>PUT PIXELS</i>
	NEXT
NEXT
GOTO LOOP</div>
<p>And another animation technique here, using a set of prepared designs,
swapping the design pointer of one sprite rapidly.</p>
<div class="code">FOR I=0 TO 5*288-1:<a href="#496">READ</a> B:POKE I,B:NEXT
SPRY(0)=192
F=0:X=-23
@LOOP
SPRDGN(0)=INT(F)*288
SPRX(0)=X
X=X+1:IF X>384 THEN X=-23
F=F+0.334:IF F>5 THEN F=0
WAIT:WAIT
GOTO LOOP
DATA 0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,13,0,13,208,0,0,0,0,0,0,0,0,0,208,208,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,13,221,0,0,0,0,0,0,0,0,0,0,221,0,208,0,0,0,0,0,0,0,0,13,0,208,13,13,0,0,0,0,0,0,0,13,0,208,13,221,208,0,0,0,0,0,0,13,0,208,13,0,0,0,0,0,0,0,0,13,221,0,221,0,0,0,0,0,0,0,0,13,13,0,0,208,0,0,0,0,0,0,0,0,0,221,208,13,208,0,0,0,0,0,0,0,13,13,13,208,13,0,0,0,0,13,221,221,208,208,0,13,208,208,0,0,0,13,0,0,13,0,0,0,13,13,0,0,0,13,13,221,208,0,0,0,13,13,221,0,0,13,13,0,0,0,0,0,0,208,13,0,0,0,208,0,0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,13,0,13,208,13,0,0,0,0,0,0,0,0,208,208,0,221,0,0,0,0,0,0,0,0,13,0,0,13,0,0,0,0,0,0,221,221,221,0,0,208,0,0,0,0,0,0,208,13,0,221,221,208,0,0,0,0,0,0,208,0,208,13,0,0,0,0,0,0,0,0,221,0,208,13,0,0,0,0,0,0,0,0,208,0,208,13,0,0,0,0,0,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,0,221,0,13,0,0,0,0,0,0,13,208,13,13,221,0,208,0,0,0,0,0,208,13,208,208,0,208,13,0,0,0,0,0,208,208,13,0,0,13,13,0,0,0,0,13,13,13,208,0,0,13,13,0,0,0,0,13,208,0,0,0,0,13,13,0,0,0,0,0,0,0,0,0,0,13,13,221,0,0,0,0,0,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,13,221,208,0,0,0,0,0,0,0,0,0,0,0,0,0,0
REM<i> TOE IS AT X=15, Y=23 IN FRAME #2</i>
DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,13,0,13,208,0,0,0,0,0,0,0,0,0,208,208,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,208,13,0,0,0,0,0,0,0,0,0,208,208,13,13,0,0,0,0,0,0,0,0,208,208,13,221,208,0,0,0,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,0,208,0,208,0,0,0,0,0,0,0,0,0,221,0,208,0,0,0,0,0,0,0,0,0,208,208,13,0,0,0,0,0,0,0,0,0,13,13,13,0,0,0,0,0,0,0,0,13,208,13,0,208,0,0,0,0,0,0,221,208,13,221,13,0,0,0,0,0,0,0,208,13,208,208,13,0,0,0,0,0,0,0,208,208,0,208,208,0,0,0,0,0,0,0,221,0,13,0,13,0,0,0,0,0,0,0,0,0,13,221,221,0,0,0,0
DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,13,0,13,208,0,0,0,0,0,0,0,0,0,208,208,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,13,208,221,0,0,0,0,0,0,0,0,0,13,208,13,0,0,0,0,0,0,0,0,0,13,208,13,0,0,0,0,0,0,0,0,0,13,208,13,208,0,0,0,0,0,0,0,0,13,221,221,221,0,0,0,0,0,0,0,0,13,0,13,0,0,0,0,0,0,0,0,0,0,208,0,208,0,0,0,0,0,0,0,0,0,208,0,208,0,0,0,0,0,0,0,0,0,221,0,221,0,0,0,0,0,0,0,0,0,13,0,208,208,0,0,0,0,0,0,0,221,208,0,208,208,0,0,0,0,0,0,0,208,208,13,221,0,0,0,0,0,0,0,0,221,0,208,0,0,0,0,0,0,0,0,0,221,13,208,0,0,0,0,0,0,0,0,0,221,0,13,0,0,0,0,0,0,0,0,0,13,221,221,0,0,0,0,0
REM<i> TOE IS AT X=9, Y=23 IN FRAME #4</i>
REM<i> TO KEEP FOOT ON THE GROUND, MOVE THE SPRITE 3 PIXELS AHEAD PER FRAME</i>
DATA 0,0,0,0,0,221,208,0,0,0,0,0,0,0,0,0,13,0,221,0,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,13,0,13,208,0,0,0,0,0,0,0,0,0,208,208,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,13,221,0,0,0,0,0,0,0,0,0,0,13,208,208,0,0,0,0,0,0,0,0,0,208,208,13,0,0,0,0,0,0,0,0,0,208,208,13,0,0,0,0,0,0,0,0,0,13,208,13,208,0,0,0,0,0,0,0,0,13,221,221,221,0,0,0,0,0,0,0,0,13,0,0,208,0,0,0,0,0,0,0,0,0,221,208,13,208,0,0,0,0,0,0,0,13,13,13,208,13,0,0,0,0,0,0,0,13,13,0,13,0,208,0,0,0,0,0,0,208,208,0,13,0,208,0,0,0,0,0,0,208,208,0,208,13,0,0,0,0,0,0,13,13,0,13,13,208,0,0,0,0,0,0,13,13,0,13,0,208,0,0,0,0,0,0,208,208,0,0,208,13,0,0,0,0,0,13,0,208,0,0,13,208,0,0,0,0,0,0,208,13,0,0,0,0,0,0,0,0,0,0,13,221,0,0,0,0,0,0,0
REM<i> NORMALLY YOU WOULD USE THE DESIGNER TO PREDESIGN ANIMATION FRAMES</i>
REM<i> BUT IN THIS TUTORIAL, IT'S EASIER TO COPY INSTRUCTIONS THAN MEMORY</i></div>

<h2><a name="2006">Tiles</a></h2>
<p>You can put any number of sprites on screen... but it may become cumbersome
to move a lot of them together. A typical example is when you have a
scrolled maze, platform or background in the game. For that purpose, we have 
smoothly scrollable grid of tiles.</p>
<div class="code">DIM MAZE(16,16)
FOR RO=0 TO 15:FOR CO=0 TO 15
    READ MAZE(RO,CO)
N.:N.
TILEX=0:TILEY=0 '<i>BUILT-IN VARIABLE - TRANSLATES THE WHOLE GRID OF DESIGNS</i>
OX=0:OY=7
FOR X=0 TO 15:FOR Y=0 TO 8
  TILE(Y,X)=-1 '<i>BUILT-IN ARRAY OF DESIGN POINTERS - GETS VALUES LIKE SPRDGN()</i>
  IF MAZE(Y+OY,X+OX) THEN TILE(Y,X)=DGNWALL()
N.:N.
PRINT "SWITCH TO GRAPHIC SCREEN AND HIT A BUTTON"
@TRIG:WAIT:GET A:IF A&lt;=0 THEN GOTO TRIG
REM<i> SMOOTH SCROLLING OF TILES</i>
FOR OY=OY-1 TO 0 STEP -1
	FOR X=0 TO 15:FOR Y=9 TO 1 STEP -1
		TILE(Y,X)=TILE(Y-1,X) '<i>MOVE EVERY TILE A ROW LOWER</i>
	N.:N.
	FOR X=0 TO 15 '<i>GET A NEW ROW FROM THE ARRAY</i>
		TILE(Y,X)=-1
		IF MAZE(Y+OY,X+OX) THEN TILE(Y,X)=DGNWALL()
	N.
	TILEY=-23 '<i>RASTER-BY-RASTER SCROLLING STARTS 1 RASTER ABOVE PREVIOUS STATE</i>
	FOR SM=0 TO 23
		WAIT:WAIT
		TILEY=TILEY+1
	NEXT
NEXT
TILEY=0
FOR I=0 TO 20:WAIT:WAIT:NEXT
END
REM<i> https://im8.boards.net/post/14</i>
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 
DATA 1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,1 
DATA 1,0,1,0,1,0,1,1,1,0,0,0,0,0,1,1 
DATA 1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1 
DATA 1,0,1,1,1,1,0,1,1,0,1,0,1,0,1,1 
DATA 1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1 
DATA 1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1 
DATA 1,1,1,0,1,0,1,0,1,0,1,0,1,0,0,1 
DATA 1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1 
DATA 1,0,0,1,0,1,0,1,0,1,1,1,1,0,0,1 
DATA 1,1,0,1,1,1,1,1,1,1,1,0,1,0,1,1 
DATA 1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1 
DATA 1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1 
DATA 1,1,0,1,0,1,1,0,1,1,0,0,0,1,0,1 
DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1 
DATA 1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1</div>
</body>
</html>
